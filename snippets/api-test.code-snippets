{
  "sut": {
    "scope": "typescript",
    "prefix": ["sut", "makeSut"],
    "body": [
      "interface Sut {",
      "  sut: ${1:Class}",
      "  $2: $3",
      "}",
      "",
      "const makeSut = (): Sut => {",
      "  const $2 = $4$3",
      "  const sut = new ${1:Class}($2)",
      "  return {",
      "    sut",
      "    $2",
      "  }",
      "}",
      ""
    ]
  },

  "test": {
    "scope": "typescript",
    "prefix": ["test", "describe"],
    "body": [
      "describe('$1', () => {",
      "  it('should $2', async () => {",
      "    const { sut, $5Spy } = makeSut()",
      "    const request = mockRequest()",
      "",
      "    await sut.${3:method}(request)",
      "",
      "    expect($5Spy.calledTimes).toBe(1)",
      "    expect($5Spy.$6).${7:toBe}($0)",
      "  })",
      "})"
    ]
  },

  "it": {
    "scope": "typescript",
    "prefix": "it",
    "body": [
      "it('should $1', async () => {",
      "  const { sut, $4Spy } = makeSut()",
      "  const request = mockRequest()",
      "",
      "  await sut.${3:method}(request)",
      "",
      "  expect($4Spy.calledTimes).toBe(1)",
      "  expect($4Spy.$5).${6:toBe}($0)",
      "})"
    ]
  },

  "exception": {
    "scope": "typescript",
    "prefix": "exception",
    "body": [
      "it('should throw if any dependency throws', async () => {",
      "  const suts: ${1:Class}[] = [",
      "    new ${1:Class}(",
      "      { ${2:method}: () => throwError() }",
      "    )",
      "  ]",
      "  for (const sut of suts) {",
      "    const request = mockRequest()",
      "    const promise = sut.${3:method}(request)",
      "    await expect(promise).rejects.toThrow()",
      "  }",
      "})"
    ]
  },

  "mockModel": {
    "scope": "typescript",
    "prefix": ["mm", "mockModel"],
    "body": [
      "import { $1 } from '@/domain/model'",
      "import { faker } from '@faker-js/faker'",
      "",
      "export const mock$1 = (): $1$2 => ({",
      "  $0",
      "})",
      ""
    ]
  },

  "mockRequest": {
    "scope": "typescript",
    "prefix": ["mr", "mockRequest"],
    "body": [
      "const mockRequest = (): I$1$2.Params => ({",
      "  $0",
      "})",
      ""
    ]
  }
}

